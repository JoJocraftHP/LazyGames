<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LazyGames</title>

  <link rel="icon" href="lgsdocument.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />

  <!-- Open Graph -->
  <meta property="og:title" content="LazyGames - Innovative Roblox Game Development" />
  <meta property="og:description" content="LazyGames is a Roblox studio specializing in simulators and innovative game concepts. Explore our top games like Jetpack Training and Lift a Pet, and join our community!" />
  <meta property="og:image" content="https://www.lazygames.dev/LGSCard.png" />
  <meta property="og:url" content="https://www.lazygames.dev/" />
  <meta property="og:type" content="website" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@LazyGamesTeam" />
  <meta name="twitter:title" content="LazyGames - Innovative Roblox Game Development" />
  <meta name="twitter:description" content="LazyGames is a Roblox studio specializing in simulators and innovative game concepts. Explore our top games like Jetpack Training and Lift a Pet, and join our community!" />
  <meta name="twitter:image" content="https://www.lazygames.dev/LGSCard.png" />
</head>
<body>
  <!-- Header -->
  <header class="reveal" role="banner">
    <a href="#hero" class="logo"><img src="LazyGamesBrandingMain.png" alt="LazyGames Logo" /><span>LazyGames</span></a>
    <button class="hamburger" aria-label="Toggle navigation">&#9776;</button>
    <nav aria-label="Main navigation">
      <ul>
        <li><a href="#hero">Home</a></li>
        <li><a href="#games">Our Games</a></li>
        <li><a href="#about">About Us</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero -->
  <section id="hero" class="hero reveal">
    <div class="hero-content">
      <h1>Welcome to LazyGames</h1>
      <p>We are an experienced Roblox studio specializing in simulators and innovative game concepts.</p>
      <a href="#games" class="btn btn-secondary">Explore Our Games</a>
      <!-- Totals under the button -->
      <div class="total-stats" aria-live="polite">
        <div class="stat-item"><span id="total-ccu">—</span> Total CCU</div>
        <div class="stat-item"><span id="total-visits">—</span> Total Visits</div>
      </div>
    </div>
  </section>

  <!-- Games -->
  <section id="games" class="reveal">
    <h2>Our Top Hits</h2>
    <p class="section-subtitle">Here are some of our top games</p>
    <div class="games-grid">

      <!-- Crush for Brainrots -->
      <div class="game-card reveal" data-universe-id="8357236286">
        <a href="https://www.roblox.com/games/117579798602171/UPD5-Crush-for-Brainrots" target="_blank" rel="noopener noreferrer">
          <div class="game-card-image-wrapper">
            <img src="GameIcons/CrushforBrainrots.png" alt="Crush for Brainrots" loading="lazy" />
          </div>
        </a>
        <div class="game-card-content">
          <h3>Crush for Brainrots</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats live"><span class="live-peak">Peak CCU: —</span></p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/117579798602171/UPD5-Crush-for-Brainrots" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
        </div>
      </div>

      <!-- Jetpack Training -->
      <div class="game-card reveal" data-universe-id="7017269091">
        <a href="https://www.roblox.com/games/95557214969049" target="_blank" rel="noopener noreferrer">
          <div class="game-card-image-wrapper">
            <img src="GameIcons/JetpackTraining.png" alt="Jetpack Training" loading="lazy" />
          </div>
        </a>
        <div class="game-card-content">
          <h3>Jetpack Training</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats live"><span class="live-peak">Peak CCU: —</span></p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/95557214969049" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
        </div>
      </div>

      <!-- Lift a Pet -->
      <div class="game-card reveal" data-universe-id="5792683386">
        <a href="https://www.roblox.com/games/16858182871" target="_blank" rel="noopener noreferrer">
          <div class="game-card-image-wrapper">
            <img src="GameIcons/LiftaPet.png" alt="Lift a Pet" loading="lazy" />
          </div>
        </a>
        <div class="game-card-content">
          <h3>Lift a Pet</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats live"><span class="live-peak">Peak CCU: —</span></p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/16858182871" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
        </div>
      </div>

      <!-- Monster Training -->
      <div class="game-card reveal" data-universe-id="7676176341">
        <a href="https://www.roblox.com/games/78263156263540" target="_blank" rel="noopener noreferrer">
          <div class="game-card-image-wrapper">
            <img src="GameIcons/MonsterTraining.png" alt="Monster Training" loading="lazy" />
          </div>
        </a>
        <div class="game-card-content">
          <h3>Monster Training</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats live"><span class="live-peak">Peak CCU: —</span></p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/78263156263540" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
        </div>
      </div>

    </div>
  </section>

  <!-- About -->
  <section id="about" class="reveal">
    <h2>About Us</h2>
    <p>LazyGames is a Roblox studio founded in 2023 by developers active since 2017.</p>
    <p>We’re best known for our simulator games, but we’re expanding into new genres with fresh ideas. From concept to launch, we focus on creating fun, high-quality experiences for players worldwide.</p>
  </section>

  <!-- Groups -->
  <section id="groups" class="reveal">
    <h2>Our Roblox Groups</h2>
    <p class="section-subtitle">Join our Roblox communities:</p>
    <div class="groups-grid">
      <div class="group-card">
        <p>Main Group</p>
        <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" target="_blank" rel="noopener noreferrer">
          <img src="StudioIcons/LazyStudios.png" alt="Main Group" />
        </a>
        <p class="group-members" data-group-id="33472368">Members: —</p>
      </div>

      <div class="group-card">
        <p>Active Games</p>
        <a href="https://www.roblox.com/communities/35868694/ActiveGameStudios#!/about" target="_blank" rel="noopener noreferrer">
          <img src="StudioIcons/ActiveGames.png" alt="Active Games" />
        </a>
        <p class="group-members" data-group-id="35868694">Members: —</p>
      </div>

      <div class="group-card">
        <p>Tycoon Group</p>
        <a href="https://www.roblox.com/communities/33860522/LazyGames-Tycoons#!/about" target="_blank" rel="noopener noreferrer">
          <img src="StudioIcons/LazyTycoons.png" alt="Tycoon Group" />
        </a>
        <p class="group-members" data-group-id="33860522">Members: —</p>
      </div>

      <div class="group-card">
        <p>Obby Group</p>
        <a href="https://www.roblox.com/communities/33635810/LazyGamesObbys#!/about" target="_blank" rel="noopener noreferrer">
          <img src="StudioIcons/LazyObbies.png" alt="Obby Group" />
        </a>
        <p class="group-members" data-group-id="33635810">Members: —</p>
      </div>
    </div>
  </section>

  <!-- Team -->
  <section id="team" class="reveal">
    <h2>Meet the Team</h2>
    <div class="team-grid">
      <div class="team-card reveal">
        <a href="https://www.roblox.com/users/214865113/profile" class="team-link" target="_blank" rel="noopener noreferrer">
          <img src="JoJoProfile.png" alt="JoJocraftHP" loading="lazy" decoding="async" />
          <h3>JoJocraftHP</h3>
        </a>
        <p>Owner, Game Design &amp; Management</p>
      </div>
      <div class="team-card reveal">
        <a href="https://www.roblox.com/users/271040226/profile" class="team-link" target="_blank" rel="noopener noreferrer">
          <img src="MitexProfile.png" alt="mitex" loading="lazy" decoding="async" />
          <h3>mitex</h3>
        </a>
        <p>Co-Owner, Scripter</p>
      </div>
      <div class="team-card reveal">
        <a href="https://www.roblox.com/users/1441090007/profile" class="team-link" target="_blank" rel="noopener noreferrer">
          <img src="LumpiProfile.png" alt="Lumpi" loading="lazy" decoding="async" />
          <h3>Lumpi</h3>
        </a>
        <p>Developer, Builder &amp; Modeler</p>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="reveal">
    <h2>Get in Touch</h2>
    <p class="section-subtitle">Join our community on Discord, Twitter, or our Roblox group:</p>
    <div class="contact-buttons">
      <a href="https://discord.gg/UnhZDUH93X" class="btn" target="_blank" rel="noopener noreferrer">Discord</a>
      <a href="https://x.com/LazyGamesTeam" class="btn" target="_blank" rel="noopener noreferrer">Twitter/X</a>
      <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" class="btn" target="_blank" rel="noopener noreferrer">Roblox Group</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="reveal">
    <nav>
      <a href="#hero">Home</a> |
      <a href="#games">Our Games</a> |
      <a href="#about">About Us</a> |
      <a href="#groups">Groups</a> |
      <a href="#contact">Contact</a>
    </nav>
    <p>&copy; <span id="current-year"></span> LazyGames</p>
  </footer>

  <!-- Back to top -->
  <button id="back-to-top" aria-label="Back to top">↑</button>

  <!-- Scripts -->
  <script>
    // ===== CONFIG =====
    const WORKER_URL = 'https://livestatsupdate.jojocrafthdyt.workers.dev';
    const REFRESH_MS = 60000;

    // ===== HELPERS =====
    const q  = (sel, root = document) => root.querySelector(sel);
    const qa = (sel, root = document) => [...root.querySelectorAll(sel)];
    const fmtAbbrev = (n) => {
      if (typeof n !== 'number' || isNaN(n)) return '—';
      if (n >= 1_000_000) return (Math.round((n / 1_000_000) * 10) / 10).toFixed(1) + 'M';
      if (n >= 1_000)     return (Math.round((n / 1_000) * 10) / 10).toFixed(1) + 'K';
      return n.toLocaleString();
    };

    // robust fetch with timeout + backoff + cache bypass
    async function fetchJSON(url, { timeout = 8000, retries = 2 } = {}) {
      let attempt = 0, lastErr;
      while (attempt <= retries) {
        const ctrl = new AbortController();
        const t = setTimeout(() => ctrl.abort('timeout'), timeout);
        try {
          const bust = (url.includes('?') ? '&' : '?') + '_ts=' + Date.now();
          const res = await fetch(url + bust, {
            headers: { accept: 'application/json' },
            signal: ctrl.signal,
            cache: 'no-store'
          });
          clearTimeout(t);
          if (!res.ok) throw new Error('HTTP ' + res.status);
          return await res.json();
        } catch (e) {
          clearTimeout(t);
          lastErr = e;
          await new Promise(r => setTimeout(r, 300 + attempt * 400));
          attempt++;
        }
      }
      throw lastErr;
    }

    // ===== LIVE GAME STATS (per-card + totals) =====
// Renders per-card stats + hero totals (CCU + Visits + Peak)
function renderGameStats(payload) {
  const data = Array.isArray(payload?.data) ? payload.data : [];
  const byId = new Map(data.map(g => [String(g.id), g]));
  const cards = qa('#games .game-card[data-universe-id]');

  let totalCCU = 0;
  let totalVisits = 0;
  let totalPeak = 0; // optional: aggregate peak across games (max)

  cards.forEach(card => {
    const uid = String(card.getAttribute('data-universe-id'));
    const g = byId.get(uid);
    if (!g) return;

    const ccuEl    = q('.live-ccu', card);
    const peakEl   = q('.live-peak', card);   // make sure each card has <span class="live-peak">
    const visitsEl = q('.live-visits', card);

    // per-card
    if (ccuEl)    ccuEl.textContent    = 'Current CCU: ' + (typeof g.playing      === 'number' ? g.playing.toLocaleString()      : '—');
    if (peakEl)   peakEl.textContent   = 'Peak CCU: '    + (typeof g.peakPlaying === 'number' ? g.peakPlaying.toLocaleString() : '—');
    if (visitsEl) visitsEl.textContent = 'Visits: '      + (typeof g.visits      === 'number' ? fmtAbbrev(g.visits)             : '—');

    // totals
    if (typeof g.playing      === 'number') totalCCU   += g.playing;
    if (typeof g.visits       === 'number') totalVisits += g.visits;
    if (typeof g.peakPlaying  === 'number') totalPeak    = Math.max(totalPeak, g.peakPlaying);
  });

  // hero totals
  const totalCCUEl    = q('#total-ccu');
  const totalVisitsEl = q('#total-visits');
  if (totalCCUEl)    totalCCUEl.textContent    = fmtAbbrev(totalCCU);
  if (totalVisitsEl) totalVisitsEl.textContent = fmtAbbrev(totalVisits);

  // (Optional) expose overall peak somewhere:
  // const overallPeakEl = q('#overall-peak');
  // if (overallPeakEl) overallPeakEl.textContent = (totalPeak ? totalPeak.toLocaleString() : '—');
}


    async function fillLiveGameStats() {
      const ids = qa('#games .game-card[data-universe-id]')
        .map(c => c.getAttribute('data-universe-id'))
        .filter(Boolean);
      if (!ids.length) return;
      const url = `${WORKER_URL}/?endpoint=games&ids=${encodeURIComponent(ids.join(','))}`;
      try {
        const json = await fetchJSON(url, { timeout: 9000, retries: 3 });
        renderGameStats(json);
      } catch (e) {
        console.warn('[LiveGames] fetch failed:', e);
      }
    }

    // ===== LIVE GROUP MEMBERS =====
    function renderGroup(el, data) {
      if (typeof data?.memberCount === 'number') {
        el.textContent = 'Members: ' + data.memberCount.toLocaleString();
      } else {
        el.textContent = 'Members: —';
      }
    }

    async function fillGroupMembers() {
      const els = qa('.group-members[data-group-id]');
      if (!els.length) return;

      await Promise.all(els.map(async el => {
        const id = el.getAttribute('data-group-id');
        if (!id) return;
        try {
          const json = await fetchJSON(`${WORKER_URL}/?endpoint=group&groupId=${encodeURIComponent(id)}`, { timeout: 9000, retries: 3 });
          renderGroup(el, json);
        } catch (err) {
          console.warn(`[Group ${id}] fetch failed:`, err);
          renderGroup(el, null);
        }
      }));
    }

    // ===== PAGE BOOT =====
    document.addEventListener('DOMContentLoaded', () => {
      // Reveal animations (reduced motion aware)
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReduced) {
        try {
          const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(e => {
              if (e.isIntersecting) { e.target.classList.add('active'); obs.unobserve(e.target); }
            });
          }, { threshold: 0.1 });
          qa('.reveal').forEach(el => observer.observe(el));
        } catch {}
      } else {
        qa('.reveal').forEach(el => el.classList.add('active'));
      }

      // Hero typewriter caret: remove ONLY the caret when typing ends
      const h1 = q('.hero h1');
      if (h1) {
        h1.addEventListener('animationend', (e) => {
          if (e.animationName === 'typewriter') {
            h1.style.borderRight = 'none';
          }
        });
      }

      // Back to top
      const back = q('#back-to-top');
      if (back) {
        window.addEventListener('scroll', () => back.classList.toggle('show', window.scrollY > 300));
        back.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      // Footer year
      const yearEl = q('#current-year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      // Mobile nav
      const hamburger = q('.hamburger');
      const nav = q('nav');
      if (hamburger && nav) {
        hamburger.addEventListener('click', () => {
          nav.classList.toggle('active');
          hamburger.classList.toggle('is-active');
        });
        qa('nav ul li a').forEach(link => link.addEventListener('click', () => {
          nav.classList.remove('active');
          hamburger.classList.remove('is-active');
        }));
      }

      // Live data now + refresh
      const runLive = () => { fillLiveGameStats(); fillGroupMembers(); };
      runLive();

      let timer = setInterval(() => {
        if (document.visibilityState === 'visible') runLive();
      }, REFRESH_MS);

      document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'visible') runLive();
      });

      window.addEventListener('online', runLive);
      window.addEventListener('pagehide', () => clearInterval(timer));
    });
  </script>
</body>
</html>
