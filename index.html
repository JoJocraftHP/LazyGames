<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LazyGames</title>

  <!-- Meta Description for SEO -->
  <meta name="description" content="LazyGames is a Roblox studio specializing in simulators and innovative game concepts. Play our top games like Jetpack Training and Lift a Pet!">

  <!-- Favicon -->
  <link rel="icon" href="lgsdocument.png" type="image/png">

  <!-- Preconnect to external origins for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;800&display=swap" rel="stylesheet">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css">

  <!-- Open Graph -->
  <meta property="og:title" content="LazyGames - Innovative Roblox Game Development">
  <meta property="og:description" content="LazyGames is a Roblox studio specializing in simulators and innovative game concepts. Explore our top games like Jetpack Training and Lift a Pet!">
  <meta property="og:image" content="https://www.lazygames.dev/LGSCard.png">
  <meta property="og:url" content="https://www.lazygames.dev/">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@LazyGamesTeam">
  <meta name="twitter:title" content="LazyGames - Innovative Roblox Game Development">
  <meta name="twitter:description" content="LazyGames is a Roblox studio specializing in simulators and innovative game concepts. Explore our top games!">
  <meta name="twitter:image" content="https://www.lazygames.dev/LGSCard.png">

  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow">
  <meta name="author" content="LazyGames">
  <meta name="keywords" content="Roblox, game studio, simulators, Roblox games, LazyGames, game development, Jetpack Training, Lift a Pet">
  <link rel="canonical" href="https://www.lazygames.dev/">

  <!-- Mobile Browser Theme -->
  <meta name="theme-color" content="#0a0a0f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="LGSFavIcon.png">

  <!-- Performance: Preload Critical Assets -->
  <link rel="preload" href="LazyGamesGameBanner.png" as="image">
  <link rel="dns-prefetch" href="https://livestatsupdate.jojocrafthdyt.workers.dev">

  <!-- Structured Data (JSON-LD) for Rich Search Results -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "LazyGames",
    "alternateName": "LazyGameStudios",
    "url": "https://www.lazygames.dev",
    "logo": "https://www.lazygames.dev/LazyGamesBrandingMain.png",
    "description": "LazyGames is a Roblox studio specializing in simulators and innovative game concepts.",
    "foundingDate": "2023",
    "sameAs": [
      "https://discord.gg/UnhZDUH93X",
      "https://x.com/LazyGamesTeam",
      "https://www.roblox.com/communities/33472368/LazyGameStudios"
    ],
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "customer support",
      "url": "https://discord.gg/UnhZDUH93X"
    }
  }
  </script>
</head>
<body>
  <!-- Skip Link for Accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header class="header reveal" role="banner">
    <div class="header__container">
      <a href="#hero" class="logo">
        <img src="LazyGamesBrandingMain.png" alt="" class="logo__image">
        <span>LazyGames</span>
      </a>

      <button class="hamburger" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="main-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <nav id="main-nav" class="nav" aria-label="Main navigation">
        <ul class="nav__list">
          <li class="nav__item"><a href="#hero" class="nav__link">Home</a></li>
          <li class="nav__item"><a href="#games" class="nav__link">Our Games</a></li>
          <li class="nav__item"><a href="#about" class="nav__link">About Us</a></li>
          <li class="nav__item"><a href="#groups" class="nav__link">Groups</a></li>
          <li class="nav__item"><a href="#team" class="nav__link">Team</a></li>
          <li class="nav__item"><a href="#contact" class="nav__link">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main-content">
    <!-- Hero Section -->
    <section id="hero" class="hero">
      <!-- Floating Orbs for Visual Effect -->
      <div class="hero__orb hero__orb--1" aria-hidden="true"></div>
      <div class="hero__orb hero__orb--2" aria-hidden="true"></div>
      <div class="hero__orb hero__orb--3" aria-hidden="true"></div>

      <div class="hero__content">
        <!-- Badge - always visible, no animation -->
        <div class="hero__badge">
          <span class="hero__badge-dot" aria-hidden="true"></span>
          Roblox Game Studio
        </div>

        <h1 class="hero__title reveal">Welcome to LazyGames</h1>
        <p class="hero__subtitle reveal">We are an experienced Roblox studio specializing in simulators and innovative game concepts. Join millions of players in our immersive gaming experiences.</p>

        <div class="hero__cta reveal">
          <a href="#games" class="btn btn--primary btn--lg">Explore Our Games</a>
          <a href="https://discord.gg/UnhZDUH93X" class="btn btn--secondary btn--lg" target="_blank" rel="noopener noreferrer">Join Discord</a>
        </div>

        <!-- Live Stats -->
        <div class="hero-stats reveal" aria-live="polite" aria-label="Live game statistics">
          <div class="hero-stats__item">
            <span id="total-ccu" class="hero-stats__value">--</span>
            <span class="hero-stats__label">Players Online</span>
          </div>
          <div class="hero-stats__item">
            <span id="total-visits" class="hero-stats__value">--</span>
            <span class="hero-stats__label">Total Visits</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Games Section -->
    <section id="games" class="section reveal">
      <header class="section__header">
        <span class="section__eyebrow">Featured</span>
        <h2 class="section__title section__title--gradient">Our Top Hits</h2>
        <p class="section__subtitle">Discover our most popular games loved by millions of players worldwide</p>
      </header>

      <div class="games-grid">
        <!-- Crush for Brainrots -->
        <article class="game-card reveal" data-universe-id="8357236286">
          <a href="https://www.roblox.com/games/117579798602171/UPD5-Crush-for-Brainrots" target="_blank" rel="noopener noreferrer" class="game-card__image-wrapper">
            <div class="game-card__live-badge">
              <span class="game-card__live-dot" aria-hidden="true"></span>
              LIVE
            </div>
            <img src="GameIcons/CrushTN1.png" alt="Crush for Brainrots game thumbnail" class="game-card__image" loading="lazy">
          </a>
          <div class="game-card__content">
            <h3 class="game-card__title">Crush for Brainrots</h3>
            <div class="game-card__stats">
              <div class="game-card__stat">
                <span class="game-card__stat-value live-ccu">--</span>
                <span class="game-card__stat-label">Playing</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-peak">--</span>
                <span class="game-card__stat-label">Peak</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-visits">--</span>
                <span class="game-card__stat-label">Visits</span>
              </div>
            </div>
            <div class="game-card__actions">
              <a href="https://www.roblox.com/games/117579798602171/UPD5-Crush-for-Brainrots" class="btn btn--primary btn--sm" target="_blank" rel="noopener noreferrer">
                Play Now
              </a>
            </div>
          </div>
        </article>

        <!-- Jetpack Training -->
        <article class="game-card reveal" data-universe-id="7017269091">
          <a href="https://www.roblox.com/games/95557214969049" target="_blank" rel="noopener noreferrer" class="game-card__image-wrapper">
            <div class="game-card__live-badge">
              <span class="game-card__live-dot" aria-hidden="true"></span>
              LIVE
            </div>
            <img src="GameIcons/JetpackTN1.png" alt="Jetpack Training game thumbnail" class="game-card__image" loading="lazy">
          </a>
          <div class="game-card__content">
            <h3 class="game-card__title">Jetpack Training</h3>
            <div class="game-card__stats">
              <div class="game-card__stat">
                <span class="game-card__stat-value live-ccu">--</span>
                <span class="game-card__stat-label">Playing</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-peak">--</span>
                <span class="game-card__stat-label">Peak</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-visits">--</span>
                <span class="game-card__stat-label">Visits</span>
              </div>
            </div>
            <div class="game-card__actions">
              <a href="https://www.roblox.com/games/95557214969049" class="btn btn--primary btn--sm" target="_blank" rel="noopener noreferrer">
                Play Now
              </a>
            </div>
          </div>
        </article>

        <!-- Lift a Pet -->
        <article class="game-card reveal" data-universe-id="5792683386">
          <a href="https://www.roblox.com/games/16858182871" target="_blank" rel="noopener noreferrer" class="game-card__image-wrapper">
            <div class="game-card__live-badge">
              <span class="game-card__live-dot" aria-hidden="true"></span>
              LIVE
            </div>
            <img src="GameIcons/LAPTN1.png" alt="Lift a Pet game thumbnail" class="game-card__image" loading="lazy">
          </a>
          <div class="game-card__content">
            <h3 class="game-card__title">Lift a Pet</h3>
            <div class="game-card__stats">
              <div class="game-card__stat">
                <span class="game-card__stat-value live-ccu">--</span>
                <span class="game-card__stat-label">Playing</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-peak">--</span>
                <span class="game-card__stat-label">Peak</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-visits">--</span>
                <span class="game-card__stat-label">Visits</span>
              </div>
            </div>
            <div class="game-card__actions">
              <a href="https://www.roblox.com/games/16858182871" class="btn btn--primary btn--sm" target="_blank" rel="noopener noreferrer">
                Play Now
              </a>
            </div>
          </div>
        </article>

        <!-- Monster Training -->
        <article class="game-card reveal" data-universe-id="7676176341">
          <a href="https://www.roblox.com/games/78263156263540" target="_blank" rel="noopener noreferrer" class="game-card__image-wrapper">
            <div class="game-card__live-badge">
              <span class="game-card__live-dot" aria-hidden="true"></span>
              LIVE
            </div>
            <img src="GameIcons/MonsterTN1.png" alt="Monster Training game thumbnail" class="game-card__image" loading="lazy">
          </a>
          <div class="game-card__content">
            <h3 class="game-card__title">Monster Training</h3>
            <div class="game-card__stats">
              <div class="game-card__stat">
                <span class="game-card__stat-value live-ccu">--</span>
                <span class="game-card__stat-label">Playing</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-peak">--</span>
                <span class="game-card__stat-label">Peak</span>
              </div>
              <div class="game-card__stat">
                <span class="game-card__stat-value live-visits">--</span>
                <span class="game-card__stat-label">Visits</span>
              </div>
            </div>
            <div class="game-card__actions">
              <a href="https://www.roblox.com/games/78263156263540" class="btn btn--primary btn--sm" target="_blank" rel="noopener noreferrer">
                Play Now
              </a>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section reveal">
      <header class="section__header">
        <span class="section__eyebrow">Our Story</span>
        <h2 class="section__title section__title--gradient">About Us</h2>
      </header>
      <div class="about__content">
        <p class="about__text">LazyGames is a <span class="about__highlight">Roblox studio founded in 2023</span> by developers active since 2017. With years of experience in game development, we bring creativity and quality to every project.</p>
        <p class="about__text">We're best known for our <span class="about__highlight">simulator games</span>, but we're expanding into new genres with fresh ideas. From concept to launch, we focus on creating fun, high-quality experiences for players worldwide.</p>
      </div>
    </section>

    <!-- Groups Section -->
    <section id="groups" class="section reveal">
      <header class="section__header">
        <span class="section__eyebrow">Community</span>
        <h2 class="section__title section__title--gradient">Our Roblox Groups</h2>
        <p class="section__subtitle">Join our communities and stay updated with the latest news and releases</p>
      </header>

      <div class="groups-grid">
        <div class="group-card">
          <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" target="_blank" rel="noopener noreferrer" class="group-card__image-wrapper">
            <img src="StudioIcons/LazyStudios.png" alt="LazyGameStudios group" class="group-card__image">
          </a>
          <h3 class="group-card__title">Main Group</h3>
          <p class="group-card__members" data-group-id="33472368">Members: --</p>
        </div>

        <div class="group-card">
          <a href="https://www.roblox.com/communities/35868694/ActiveGameStudios#!/about" target="_blank" rel="noopener noreferrer" class="group-card__image-wrapper">
            <img src="StudioIcons/ActiveGames.png" alt="ActiveGameStudios group" class="group-card__image">
          </a>
          <h3 class="group-card__title">Active Games</h3>
          <p class="group-card__members" data-group-id="35868694">Members: --</p>
        </div>

        <div class="group-card">
          <a href="https://www.roblox.com/communities/33860522/LazyGames-Tycoons#!/about" target="_blank" rel="noopener noreferrer" class="group-card__image-wrapper">
            <img src="StudioIcons/LazyTycoons.png" alt="LazyGames Tycoons group" class="group-card__image">
          </a>
          <h3 class="group-card__title">Tycoon Group</h3>
          <p class="group-card__members" data-group-id="33860522">Members: --</p>
        </div>

        <div class="group-card">
          <a href="https://www.roblox.com/communities/33635810/LazyGamesObbys#!/about" target="_blank" rel="noopener noreferrer" class="group-card__image-wrapper">
            <img src="StudioIcons/LazyObbies.png" alt="LazyGamesObbys group" class="group-card__image">
          </a>
          <h3 class="group-card__title">Obby Group</h3>
          <p class="group-card__members" data-group-id="33635810">Members: --</p>
        </div>
      </div>
    </section>

    <!-- Team Section -->
    <section id="team" class="section reveal">
      <header class="section__header">
        <span class="section__eyebrow">The Creators</span>
        <h2 class="section__title section__title--gradient">Meet the Team</h2>
        <p class="section__subtitle">The talented individuals behind LazyGames</p>
      </header>

      <div class="team-grid">
        <article class="team-card reveal">
          <a href="https://www.roblox.com/users/214865113/profile" class="team-card__link" target="_blank" rel="noopener noreferrer">
            <img src="JoJoProfile.png" alt="JoJocraftHP profile picture" class="team-card__avatar" loading="lazy">
            <h3 class="team-card__name">JoJocraftHP</h3>
          </a>
          <p class="team-card__role">Owner, Game Design &amp; Management</p>
        </article>

        <article class="team-card reveal">
          <a href="https://www.roblox.com/users/271040226/profile" class="team-card__link" target="_blank" rel="noopener noreferrer">
            <img src="MitexProfile.png" alt="mitex profile picture" class="team-card__avatar" loading="lazy">
            <h3 class="team-card__name">mitex</h3>
          </a>
          <p class="team-card__role">Co-Owner, Scripter</p>
        </article>

        <article class="team-card reveal">
          <a href="https://www.roblox.com/users/1441090007/profile" class="team-card__link" target="_blank" rel="noopener noreferrer">
            <img src="LumpiProfile.png" alt="Lumpi profile picture" class="team-card__avatar" loading="lazy">
            <h3 class="team-card__name">Lumpi</h3>
          </a>
          <p class="team-card__role">Developer, Builder &amp; Modeler</p>
        </article>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact reveal">
      <div class="contact__content">
        <header class="section__header">
          <span class="section__eyebrow">Connect</span>
          <h2 class="section__title section__title--gradient">Get in Touch</h2>
          <p class="section__subtitle">Join our community on Discord, follow us on Twitter, or become a member of our Roblox group</p>
        </header>

        <div class="contact-buttons">
          <a href="https://discord.gg/UnhZDUH93X" class="btn btn--primary btn--lg" target="_blank" rel="noopener noreferrer">
            Join Discord
          </a>
          <a href="https://x.com/LazyGamesTeam" class="btn btn--secondary btn--lg" target="_blank" rel="noopener noreferrer">
            Follow on X
          </a>
          <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" class="btn btn--secondary btn--lg" target="_blank" rel="noopener noreferrer">
            Roblox Group
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer reveal">
    <div class="footer__container">
      <!-- Social Links -->
      <div class="footer__social">
        <a href="https://discord.gg/UnhZDUH93X" class="footer__social-link" target="_blank" rel="noopener noreferrer" aria-label="Join our Discord server">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
          </svg>
        </a>
        <a href="https://x.com/LazyGamesTeam" class="footer__social-link" target="_blank" rel="noopener noreferrer" aria-label="Follow us on X (Twitter)">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
        </a>
        <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" class="footer__social-link" target="_blank" rel="noopener noreferrer" aria-label="Join our Roblox group">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M5.164 0L.16 18.928 18.836 24l5.004-18.928L5.164 0zm7.906 14.771l-4.16-1.1 1.1-4.16 4.16 1.1-1.1 4.16z"/>
          </svg>
        </a>
      </div>

      <nav class="footer__nav" aria-label="Footer navigation">
        <a href="#hero" class="footer__link">Home</a>
        <a href="#games" class="footer__link">Our Games</a>
        <a href="#about" class="footer__link">About Us</a>
        <a href="#groups" class="footer__link">Groups</a>
        <a href="#team" class="footer__link">Team</a>
        <a href="#contact" class="footer__link">Contact</a>
      </nav>
      <div class="footer__divider" aria-hidden="true"></div>
      <p class="footer__copyright">&copy; <span id="current-year"></span> LazyGames. All rights reserved.</p>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="back-to-top" aria-label="Back to top">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
  </button>

  <!-- JavaScript -->
  <script>
    // ==========================================================================
    // Console Branding
    // ==========================================================================
    console.log(
      '%cðŸŽ® LazyGames %c www.lazygames.dev ',
      'background: linear-gradient(135deg, #ff1a6c, #a855f7); color: white; font-size: 24px; font-weight: bold; padding: 10px 20px; border-radius: 8px 0 0 8px;',
      'background: #0a0a0f; color: #00e5ff; font-size: 14px; padding: 15px 20px; border-radius: 0 8px 8px 0;'
    );
    console.log(
      '%cInterested in game development? Join us on Discord: https://discord.gg/UnhZDUH93X',
      'color: #a0a0b8; font-size: 12px;'
    );

    // ==========================================================================
    // Configuration
    // ==========================================================================
    const CONFIG = {
      WORKER_URL: 'https://livestatsupdate.jojocrafthdyt.workers.dev',
      REFRESH_MS: 60000,
      FETCH_TIMEOUT: 9000,
      FETCH_RETRIES: 3
    };

    // ==========================================================================
    // Utility Functions
    // ==========================================================================
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => [...root.querySelectorAll(sel)];

    /**
     * Format large numbers with abbreviations (K, M)
     */
    const formatNumber = (n) => {
      if (typeof n !== 'number' || isNaN(n)) return '--';
      if (n >= 1_000_000) return (n / 1_000_000).toFixed(1) + 'M';
      if (n >= 1_000) return (n / 1_000).toFixed(1) + 'K';
      return n.toLocaleString();
    };

    /**
     * Robust fetch with timeout, retries, and cache bypass
     */
    async function fetchJSON(url, { timeout = 8000, retries = 2 } = {}) {
      let attempt = 0;
      let lastError;

      while (attempt <= retries) {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort('timeout'), timeout);

        try {
          const separator = url.includes('?') ? '&' : '?';
          const response = await fetch(`${url}${separator}_ts=${Date.now()}`, {
            headers: { accept: 'application/json' },
            signal: controller.signal,
            cache: 'no-store'
          });

          clearTimeout(timeoutId);

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          return await response.json();
        } catch (error) {
          clearTimeout(timeoutId);
          lastError = error;
          await new Promise(resolve => setTimeout(resolve, 300 + attempt * 400));
          attempt++;
        }
      }

      throw lastError;
    }

    // ==========================================================================
    // Live Game Stats
    // ==========================================================================
    function renderGameStats(payload) {
      const data = Array.isArray(payload?.data) ? payload.data : [];
      const byId = new Map(data.map(g => [String(g.id), g]));
      const cards = $$('#games .game-card[data-universe-id]');

      let totalCCU = 0;
      let totalVisits = 0;

      cards.forEach(card => {
        const uid = String(card.getAttribute('data-universe-id'));
        const game = byId.get(uid);
        if (!game) return;

        const ccuEl = $('.live-ccu', card);
        const peakEl = $('.live-peak', card);
        const visitsEl = $('.live-visits', card);

        if (ccuEl) {
          ccuEl.textContent = typeof game.playing === 'number' ? game.playing.toLocaleString() : '--';
        }
        if (peakEl) {
          peakEl.textContent = typeof game.peakPlaying === 'number' ? game.peakPlaying.toLocaleString() : '--';
        }
        if (visitsEl) {
          visitsEl.textContent = typeof game.visits === 'number' ? formatNumber(game.visits) : '--';
        }

        if (typeof game.playing === 'number') totalCCU += game.playing;
        if (typeof game.visits === 'number') totalVisits += game.visits;
      });

      // Update hero totals
      const totalCCUEl = $('#total-ccu');
      const totalVisitsEl = $('#total-visits');
      if (totalCCUEl) totalCCUEl.textContent = formatNumber(totalCCU);
      if (totalVisitsEl) totalVisitsEl.textContent = formatNumber(totalVisits);
    }

    async function fetchGameStats() {
      const ids = $$('#games .game-card[data-universe-id]')
        .map(card => card.getAttribute('data-universe-id'))
        .filter(Boolean);

      if (!ids.length) return;

      const url = `${CONFIG.WORKER_URL}/?endpoint=games&ids=${encodeURIComponent(ids.join(','))}`;

      try {
        const json = await fetchJSON(url, {
          timeout: CONFIG.FETCH_TIMEOUT,
          retries: CONFIG.FETCH_RETRIES
        });
        renderGameStats(json);
      } catch (error) {
        console.warn('[LiveGames] fetch failed:', error);
      }
    }

    // ==========================================================================
    // Live Group Members
    // ==========================================================================
    function renderGroupMembers(element, data) {
      if (typeof data?.memberCount === 'number') {
        element.textContent = 'Members: ' + data.memberCount.toLocaleString();
      } else {
        element.textContent = 'Members: --';
      }
    }

    async function fetchGroupMembers() {
      const elements = $$('.group-card__members[data-group-id]');
      if (!elements.length) return;

      await Promise.all(elements.map(async (el) => {
        const id = el.getAttribute('data-group-id');
        if (!id) return;

        try {
          const json = await fetchJSON(
            `${CONFIG.WORKER_URL}/?endpoint=group&groupId=${encodeURIComponent(id)}`,
            { timeout: CONFIG.FETCH_TIMEOUT, retries: CONFIG.FETCH_RETRIES }
          );
          renderGroupMembers(el, json);
        } catch (error) {
          console.warn(`[Group ${id}] fetch failed:`, error);
          renderGroupMembers(el, null);
        }
      }));
    }

    // ==========================================================================
    // Page Initialization
    // ==========================================================================
    document.addEventListener('DOMContentLoaded', () => {
      // Reduced motion preference
      const prefersReducedMotion = window.matchMedia?.('(prefers-reduced-motion: reduce)').matches;

      // Reveal animations with Intersection Observer
      if (!prefersReducedMotion) {
        try {
          const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                entry.target.classList.add('active');
                obs.unobserve(entry.target);
              }
            });
          }, { threshold: 0.1 });

          $$('.reveal').forEach(el => observer.observe(el));
        } catch (e) {
          // Fallback: show all elements
          $$('.reveal').forEach(el => el.classList.add('active'));
        }
      } else {
        $$('.reveal').forEach(el => el.classList.add('active'));
      }

      // Header scroll effect
      const header = $('.header');
      if (header) {
        window.addEventListener('scroll', () => {
          header.classList.toggle('scrolled', window.scrollY > 50);
        }, { passive: true });
      }

      // Active nav link highlighting based on scroll position
      const sections = $$('section[id]');
      const navLinks = $$('.nav__link');

      if (sections.length && navLinks.length) {
        const observerOptions = {
          root: null,
          rootMargin: '-20% 0px -70% 0px',
          threshold: 0
        };

        const navObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const id = entry.target.getAttribute('id');
              navLinks.forEach(link => {
                link.classList.toggle('active', link.getAttribute('href') === `#${id}`);
              });
            }
          });
        }, observerOptions);

        sections.forEach(section => navObserver.observe(section));
      }

      // Back to top button
      const backToTop = $('#back-to-top');
      if (backToTop) {
        window.addEventListener('scroll', () => {
          backToTop.classList.toggle('show', window.scrollY > 300);
        }, { passive: true });

        backToTop.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      // Footer year
      const yearEl = $('#current-year');
      if (yearEl) {
        yearEl.textContent = new Date().getFullYear();
      }

      // Mobile navigation
      const hamburger = $('.hamburger');
      const nav = $('.nav');

      if (hamburger && nav) {
        hamburger.addEventListener('click', () => {
          const isActive = nav.classList.toggle('active');
          hamburger.classList.toggle('is-active', isActive);
          hamburger.setAttribute('aria-expanded', isActive);
          // Prevent body scroll when nav is open
          document.body.style.overflow = isActive ? 'hidden' : '';
        });

        // Close nav on link click
        $$('.nav__link').forEach(link => {
          link.addEventListener('click', () => {
            nav.classList.remove('active');
            hamburger.classList.remove('is-active');
            hamburger.setAttribute('aria-expanded', 'false');
            document.body.style.overflow = '';
          });
        });

        // Close nav on escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && nav.classList.contains('active')) {
            nav.classList.remove('active');
            hamburger.classList.remove('is-active');
            hamburger.setAttribute('aria-expanded', 'false');
            document.body.style.overflow = '';
          }
        });
      }

      // Live data fetching
      const fetchAllLiveData = () => {
        fetchGameStats();
        fetchGroupMembers();
      };

      // Initial fetch
      fetchAllLiveData();

      // Periodic refresh (only when visible)
      let refreshTimer = setInterval(() => {
        if (document.visibilityState === 'visible') {
          fetchAllLiveData();
        }
      }, CONFIG.REFRESH_MS);

      // Refresh on visibility change
      document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'visible') {
          fetchAllLiveData();
        }
      });

      // Refresh when coming back online
      window.addEventListener('online', fetchAllLiveData);

      // Cleanup on page hide
      window.addEventListener('pagehide', () => {
        clearInterval(refreshTimer);
      });
    });
  </script>
</body>
</html>
