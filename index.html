<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LazyGames & ActiveGames - Innovative Roblox Game Development</title>

    <link rel="icon" href="lgsdocument.png" type="image/png" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />

    <meta property="og:title" content="LazyGames & ActiveGames: The Home for Quality Roblox Simulators & New Concepts" />
    <meta property="og:description" content="LazyGames and ActiveGames are experienced Roblox studios specializing in simulator hits and innovative, fresh game concepts. Explore our top games like Crush for Brainrots and Jetpack Training." />
    <meta property="og:image" content="https://www.lazygames.dev/LGSCard.png" />
    <meta property="og:url" content="https://www.lazygames.dev/" />
    <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@LazyGamesTeam" />
    <meta name="twitter:title" content="LazyGames & ActiveGames: Roblox Game Development" />
    <meta name="twitter:description" content="LazyGames and ActiveGames are experienced Roblox studios specializing in simulator hits and innovative, fresh game concepts. Explore our top games like Crush for Brainrots and Jetpack Training." />
    <meta name="twitter:image" content="https://www.lazygames.dev/LGSCard.png" />
</head>
<body>
    <header class="reveal" role="banner">
        <a href="#hero" class="logo">
            <img src="LazyGamesBrandingMain.png" alt="LazyGames Logo" />
            <span>LazyGames</span>
            <span class="active-brand">/ ActiveGames</span>
        </a>
        <button class="hamburger" aria-label="Toggle main navigation">&#9776;</button>
        <nav aria-label="Main navigation">
            <ul>
                <li><a href="#hero">Home</a></li>
                <li><a href="#games">Our Games</a></li>
                <li><a href="#groups">Groups</a></li>
                <li><a href="#about">About Us</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section id="hero" class="hero reveal">
        <div class="hero-content">
            <h1>LazyGames | Innovative Roblox Development</h1>
            <p>We are an experienced Roblox studio specializing in simulators and expanding into new, innovative game concepts.</p>
            <a href="#games" class="btn btn-secondary">Explore Our Top Games</a>
        </div>
    </section>

    <section id="games" class="reveal">
        <h2>Our Top Hits</h2>
        <p class="section-subtitle">Jump in and play our most popular games today.</p>
        <div class="games-grid">

            <div class="game-card reveal" data-universe-id="8357236286">
                <a href="https://www.roblox.com/games/117579798602171/UPD5-Crush-for-Brainrots" target="_blank" rel="noopener noreferrer">
                    <div class="game-card-image-wrapper">
                        <img src="GameIcons/CrushforBrainrots.png" alt="Crush for Brainrots Game Icon" loading="lazy" />
                    </div>
                </a>
                <div class="game-card-content">
                    <h3>Crush for Brainrots</h3>
                    <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
                    <p class="stats">Peak CCU: 7K</p>
                    <p class="stats"><span class="live-visits">Visits: —</span></p>
                    <a href="https://www.roblox.com/games/117579798602171/UPD5-Crush-for-Brainrots" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
                </div>
            </div>

            <div class="game-card reveal" data-universe-id="7017269091">
                <a href="https://www.roblox.com/games/95557214969049" target="_blank" rel="noopener noreferrer">
                    <div class="game-card-image-wrapper">
                        <img src="GameIcons/JetpackTraining.png" alt="Jetpack Training Game Icon" loading="lazy" />
                    </div>
                </a>
                <div class="game-card-content">
                    <h3>Jetpack Training</h3>
                    <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
                    <p class="stats">Peak CCU: 5.9K</p>
                    <p class="stats"><span class="live-visits">Visits: —</span></p>
                    <a href="https://www.roblox.com/games/95557214969049" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
                </div>
            </div>

            <div class="game-card reveal" data-universe-id="5792683386">
                <a href="https://www.roblox.com/games/16858182871" target="_blank" rel="noopener noreferrer">
                    <div class="game-card-image-wrapper">
                        <img src="GameIcons/LiftaPet.png" alt="Lift a Pet Game Icon" loading="lazy" />
                    </div>
                </a>
                <div class="game-card-content">
                    <h3>Lift a Pet</h3>
                    <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
                    <p class="stats">Peak CCU: 1.9K</p>
                    <p class="stats"><span class="live-visits">Visits: —</span></p>
                    <a href="https://www.roblox.com/games/16858182871" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
                </div>
            </div>

            <div class="game-card reveal" data-universe-id="7676176341">
                <a href="https://www.roblox.com/games/78263156263540" target="_blank" rel="noopener noreferrer">
                    <div class="game-card-image-wrapper">
                        <img src="GameIcons/MonsterTraining.png" alt="Monster Training Game Icon" loading="lazy" />
                    </div>
                </a>
                <div class="game-card-content">
                    <h3>Monster Training</h3>
                    <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
                    <p class="stats">Peak CCU: 600</p>
                    <p class="stats"><span class="live-visits">Visits: —</span></p>
                    <a href="https://www.roblox.com/games/78263156263540" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
                </div>
            </div>
            
            <div class="game-card reveal" data-universe-id="5476431443">
                <a href="https://www.roblox.com/games/15837046231" target="_blank" rel="noopener noreferrer">
                    <div class="game-card-image-wrapper">
                        <img src="GameIcons/CTG.png" alt="Click To Get Big Game Icon" loading="lazy" />
                    </div>
                </a>
                <div class="game-card-content">
                    <h3>Click To Get Big</h3>
                    <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
                    <p class="stats">Peak CCU: 500</p>
                    <p class="stats"><span class="live-visits">Visits: —</span></p>
                    <a href="https://www.roblox.com/games/15837046231" class="btn" target="_blank" rel="noopener noreferrer">View Game</a>
                </div>
            </div>
        </div>
    </section>

    <section id="groups" class="reveal">
        <h2>Our Roblox Communities</h2>
        <p class="section-subtitle">Join our primary groups to get updates, perks, and connect with the community.</p>
        <div class="groups-grid">
            <div class="group-card">
                <p>Main Group</p>
                <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" target="_blank" rel="noopener noreferrer">
                    <img src="StudioIcons/LazyStudios.png" alt="LazyGameStudios Main Group Icon" />
                </a>
                <p class="group-members" data-group-id="33472368">Members: —</p>
            </div>

            <div class="group-card">
                <p>Active Group</p>
                <a href="https://www.roblox.com/communities/35868694/ActiveGameStudios#!/about" target="_blank" rel="noopener noreferrer">
                    <img src="StudioIcons/ActiveGames.png" alt="ActiveGameStudios Group Icon" />
                </a>
                <p class="group-members" data-group-id="35868694">Members: —</p>
            </div>
            
            <div class="group-card">
                <p>Tycoon Group</p>
                <a href="https://www.roblox.com/communities/33860522/LazyGames-Tycoons#!/about" target="_blank" rel="noopener noreferrer">
                    <img src="StudioIcons/LazyTycoons.png" alt="LazyGames Tycoons Group Icon" />
                </a>
                <p class="group-members" data-group-id="33860522">Members: —</p>
            </div>
        </div>
    </section>

    <section id="about" class="reveal">
        <h2>About Us</h2>
        <p class="section-subtitle">We build high-quality, engaging experiences on the Roblox platform.</p>
        <p>LazyGames was founded in 2023 by developers active since 2017. With the introduction of the **ActiveGames** label, we are strategically expanding our focus. We’re best known for our simulator games, but we’re expanding into new genres with fresh ideas, focusing on polished gameplay and continuous updates.</p>
        <p>From concept to launch, we focus on creating fun, high-quality experiences for players worldwide, aiming to deliver not just games, but a great community experience.</p>
    </section>

    <section id="team" class="reveal">
        <h2>Meet the Team</h2>
        <p class="section-subtitle">The core developers and management behind LazyGames and ActiveGames.</p>
        <div class="team-grid">
            <div class="team-card reveal">
                <h3><a href="https://www.roblox.com/users/214865113/profile" class="team-link" target="_blank" rel="noopener noreferrer">JoJocraftHP</a></h3>
                <img src="JoJoProfile.png" alt="JoJocraftHP Profile Picture" loading="lazy" decoding="async" />
                <p>Owner, Game Designer</p>
                <p class="team-role-detail">Management & Lead Concept</p>
            </div>
            <div class="team-card reveal">
                <h3><a href="https://www.roblox.com/users/271040226/profile" class="team-link" target="_blank" rel="noopener noreferrer">mitex</a></h3>
                <img src="MitexProfile.png" alt="mitex Profile Picture" loading="lazy" decoding="async" />
                <p>Co-Owner, Scripter</p>
                <p class="team-role-detail">Lead Programmer & Logic</p>
            </div>
            <div class="team-card reveal">
                <h3><a href="https://www.roblox.com/users/1441090007/profile" class="team-link" target="_blank" rel="noopener noreferrer">Lumpi</a></h3>
                <img src="LumpiProfile.png" alt="Lumpi Profile Picture" loading="lazy" decoding="async" />
                <p>Developer, Modeler</p>
                <p class="team-role-detail">Building & Asset Creation</p>
            </div>
        </div>
    </section>

    <section id="contact" class="reveal">
        <h2>Get in Touch</h2>
        <p class="section-subtitle">Join our community on Discord, Twitter, or our Roblox group for support, feedback, and updates:</p>
        <div class="contact-buttons">
            <a href="https://discord.gg/UnhZDUH93X" class="btn btn-secondary" target="_blank" rel="noopener noreferrer">Discord Community</a>
            <a href="https://x.com/LazyGamesTeam" class="btn" target="_blank" rel="noopener noreferrer">Twitter/X (@LazyGamesTeam)</a>
            <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" class="btn btn-secondary" target="_blank" rel="noopener noreferrer">Roblox Group</a>
        </div>
    </section>

    <footer class="reveal">
        <nav aria-label="Footer navigation"><a href="#hero">Home</a> | <a href="#games">Our Games</a> | <a href="#groups">Groups</a> | <a href="#about">About Us</a> | <a href="#contact">Contact</a></nav>
        <p>&copy; <span id="current-year"></span> LazyGames & ActiveGames. All Rights Reserved.</p>
    </footer>

    <button id="back-to-top" aria-label="Back to top">↑</button>

    <script>
    // ===== CONFIG (Use your Cloudflare Worker URL) =====
    const WORKER_URL = 'https://livestatsupdate.jojocrafthdyt.workers.dev';
    const REFRESH_MS = 60000;

    // ===== HELPERS =====
    const q = (sel, root = document) => root.querySelector(sel);
    const qa = (sel, root = document) => [...root.querySelectorAll(sel)];

    const fmtAbbrev = (n) => {
        if (typeof n !== 'number' || isNaN(n)) return '—';
        if (n >= 1000000) return (Math.round((n / 1000000) * 10) / 10).toFixed(1) + 'M';
        if (n >= 1000) return (Math.round((n / 1000) * 10) / 10).toFixed(1) + 'K';
        return n.toLocaleString(); // Use toLocaleString for numbers < 1000
    };

    async function fetchJSONWithTimeout(url, ms = 6000) {
        const ctrl = new AbortController();
        const t = setTimeout(() => ctrl.abort('timeout'), ms);
        try {
            const bust = (url.includes('?') ? '&' : '?') + '_ts=' + Date.now();
            const res = await fetch(url + bust, { headers: { accept: 'application/json' }, signal: ctrl.signal });
            if (!res.ok) throw new Error('HTTP ' + res.status);
            return await res.json();
        } finally {
            clearTimeout(t);
        }
    }

    async function getJSON(url) {
        try {
            return await fetchJSONWithTimeout(url, 6000);
        } catch (e) {
            // Log for dev, but try one quick retry for robustness
            console.warn('[Data Fetch] Failed once, retrying...');
            await new Promise(r => setTimeout(r, 400));
            return await fetchJSONWithTimeout(url, 6000);
        }
    }

    // ===== LIVE GAME STATS =====
    function renderGameStats(data) {
        const cards = qa('#games .game-card[data-universe-id]');
        const byId = new Map((data?.data || []).map(g => [String(g.id), g]));

        cards.forEach(card => {
            const uid = String(card.getAttribute('data-universe-id'));
            const g = byId.get(uid);
            const ccuEl = q('.live-ccu', card);
            const visitsEl = q('.live-visits', card);

            if (!g) {
                // NEW: Handle missing data gracefully
                if (ccuEl) ccuEl.textContent = 'Current CCU: N/A';
                if (visitsEl) visitsEl.textContent = 'Visits: N/A';
                return;
            }

            // Use toLocaleString for CCU, fmtAbbrev for Visits
            if (ccuEl) ccuEl.textContent = 'Current CCU: ' + (typeof g.playing === 'number' ? g.playing.toLocaleString() : '—');
            if (visitsEl) visitsEl.textContent = 'Visits: ' + fmtAbbrev(typeof g.visits === 'number' ? g.visits : NaN);
        });
    }

    async function fillLiveGameStats() {
        const cards = qa('#games .game-card[data-universe-id]');
        if (!cards.length) return;

        const ids = [...new Set(cards.map(c => c.getAttribute('data-universe-id')).filter(Boolean))];
        if (!ids.length) return;

        const url = WORKER_URL + '/?endpoint=games&ids=' + encodeURIComponent(ids.join(','));

        // Try cached data first for instant load
        try {
            const cached = sessionStorage.getItem('lg.games');
            if (cached) renderGameStats(JSON.parse(cached));
        } catch (e) { /* Ignore cache errors */ }

        try {
            const json = await getJSON(url);
            renderGameStats(json);
            sessionStorage.setItem('lg.games', JSON.stringify(json));
        } catch (err) {
            console.warn('[LiveGames] fetch failed:', err);
            // NEW: Set error message if initial fetch and retry fail
            cards.forEach(card => {
                if (!q('.live-ccu', card).textContent.includes('CCU')) q('.live-ccu', card).textContent = 'Current CCU: Fail';
                if (!q('.live-visits', card).textContent.includes('Visits')) q('.live-visits', card).textContent = 'Visits: Fail';
            });
        }
    }

    // ===== LIVE GROUP MEMBERS (Improved error handling) =====
    function renderGroup(el, data) {
        if (typeof data?.memberCount === 'number') {
            el.textContent = 'Members: ' + data.memberCount.toLocaleString();
        } else {
            el.textContent = 'Members: N/A'; // Fail state text
        }
    }

    async function fillGroupMembers() {
        const els = qa('.group-members[data-group-id]');
        if (!els.length) return;

        await Promise.all(els.map(async el => {
            const id = el.getAttribute('data-group-id');
            if (!id) return;

            const url = WORKER_URL + '/?endpoint=group&groupId=' + encodeURIComponent(id);

            try {
                const cached = sessionStorage.getItem('lg.group.' + id);
                if (cached) renderGroup(el, JSON.parse(cached));
            } catch (e) { /* Ignore cache errors */ }

            try {
                const json = await getJSON(url);
                renderGroup(el, json);
                sessionStorage.setItem('lg.group.' + id, JSON.stringify(json));
            } catch (err) {
                console.warn('[Group ' + id + '] fetch failed:', err);
                // Set fail text if fetch failed
                if (el.textContent.includes('—')) el.textContent = 'Members: Fail';
            }
        }));
    }

    // ===== PAGE BEHAVIOR =====
    document.addEventListener('DOMContentLoaded', () => {
        // ... (Intersection Observer and other UI code unchanged/omitted for brevity)

        // Reduced motion friendly reveals
        const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (!prefersReduced) {
            try {
                const observer = new IntersectionObserver((entries, obs) => {
                    entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('active'); obs.unobserve(e.target); } });
                }, { threshold: 0.1 });
                qa('.reveal').forEach(el => observer.observe(el));
            } catch {}
        } else {
            qa('.reveal').forEach(el => el.classList.add('active'));
        }

        // Header / UI niceties
        const h1 = q('.hero h1');
        if (h1) h1.addEventListener('animationend', e => { if (e.animationName === 'typewriter') h1.style.borderRight = 'none'; });

        const back = q('#back-to-top');
        if (back) {
            window.addEventListener('scroll', () => back.classList.toggle('show', window.scrollY > 300));
            back.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        const yearEl = q('#current-year');
        if (yearEl) yearEl.textContent = new Date().getFullYear();

        const hamburger = q('.hamburger');
        const nav = q('nav');
        if (hamburger && nav) {
            hamburger.addEventListener('click', () => {
                nav.classList.toggle('active');
                hamburger.classList.toggle('is-active'); // NEW: Class for styling the hamburger itself
            });
            // Also close menu when a link is clicked
            qa('nav ul li a').forEach(link => link.addEventListener('click', () => {
                nav.classList.remove('active');
                hamburger.classList.remove('is-active');
            }));
        }
        
        // Live data now + refresh while visible
        const runLive = () => { fillLiveGameStats(); fillGroupMembers(); };
        runLive();

        let timer = setInterval(() => {
            if (document.visibilityState === 'visible') runLive();
        }, REFRESH_MS);

        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') runLive();
        });

        window.addEventListener('pagehide', () => clearInterval(timer));
    });
</script>

</body>
</html>
