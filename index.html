<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LazyGames - Innovative Roblox Game Development</title>

  <link rel="icon" href="lgsdocument.png" type="image/png" />
  <link rel="stylesheet" href="style.css" />

    <meta property="og:title" content="LazyGames - Innovative Roblox Game Development" />
  <meta property="og:description" content="LazyGames is a Roblox studio specializing in simulators and innovative game concepts. Explore our top games like Jetpack Training and Lift a Pet, and join our community!" />
  <meta property="og:image" content="https://www.lazygames.dev/LGSCard.png" />
  <meta property="og:url" content="https://www.lazygames.dev/" />
  <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@LazyGamesTeam" />
  <meta name="twitter:title" content="LazyGames - Innovative Roblox Game Development" />
  <meta name="twitter:description" content="LazyGames is a Roblox studio specializing in simulators and innovative game concepts. Explore our top games like Jetpack Training and Lift a Pet, and join our community!" />
  <meta name="twitter:image" content="https://www.lazygames.dev/LGSCard.png" />
  
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" as="style" />
</head>
<body>
    <header class="reveal">
    <a href="#hero" class="logo"><img src="LazyGamesBrandingMain.png" alt="LazyGames Logo" /><span>LazyGames</span></a>
    <button class="hamburger" aria-label="Toggle navigation">&#9776;</button>
    <nav>
      <ul>
        <li><a href="#hero">Home</a></li>
        <li><a href="#games">Our Games</a></li>
        <li><a href="#about">About Us</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

    <section id="hero" class="hero reveal">
    <div class="hero-content">
      <h1>Welcome to LazyGames</h1>
      <p>We are an experienced Roblox studio specializing in simulators and innovative game concepts.</p>
      <a href="#games" class="btn primary-cta">Explore Our Games</a>
    </div>
  </section>

    <section id="games" class="reveal">
    <h2>Our Top Hits</h2>
    <p class="section-subtitle">Here are some of our top games</p>
    <div class="games-grid">

            <div class="game-card reveal" data-universe-id="8357236286">
                <img src="GameIcons/CrushforBrainrots.png" alt="Crush for Brainrots" />
        <div class="game-card-content">
          <h3>Crush for Brainrots</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats">Peak CCU: 7K</p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/117579798602171/UPD5-Crush-for-Brainrots" class="btn" target="_blank">View Game</a>
        </div>
      </div>

            <div class="game-card reveal" data-universe-id="7017269091">
        <img src="GameIcons/JetpackTraining.png" alt="Jetpack Training" loading="lazy" />
        <div class="game-card-content">
          <h3>Jetpack Training</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats">Peak CCU: 5.9K</p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/95557214969049" class="btn" target="_blank">View Game</a>
        </div>
      </div>

            <div class="game-card reveal" data-universe-id="5792683386">
        <img src="GameIcons/LiftaPet.png" alt="Lift a Pet" loading="lazy" />
        <div class="game-card-content">
          <h3>Lift a Pet</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats">Peak CCU: 1.9K</p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/16858182871" class="btn" target="_blank">View Game</a>
        </div>
      </div>

            <div class="game-card reveal" data-universe-id="7676176341">
        <img src="GameIcons/MonsterTraining.png" alt="Monster Training" loading="lazy" />
        <div class="game-card-content">
          <h3>Monster Training</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats">Peak CCU: 600</p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/78263156263540" class="btn" target="_blank">View Game</a>
        </div>
      </div>

            <div class="game-card reveal" data-universe-id="5476431443">
        <img src="GameIcons/CTG.png" alt="Click To Get Big" loading="lazy" />
        <div class="game-card-content">
          <h3>Click To Get Big</h3>
          <p class="stats live"><span class="live-ccu">Current CCU: —</span></p>
          <p class="stats">Peak CCU: 500</p>
          <p class="stats live"><span class="live-visits">Visits: —</span></p>
          <a href="https://www.roblox.com/games/15837046231" class="btn" target="_blank">View Game</a>
        </div>
      </div>
    </div>
  </section>

    <section id="about" class="reveal">
    <h2>About Us</h2>
    <p>LazyGames is a Roblox studio founded in 2023 by developers active since 2017.</p>
    <p>We’re best known for our simulator games, but we’re expanding into new genres with fresh ideas. From concept to launch, we focus on creating fun, high-quality experiences for players worldwide.</p>
  </section>

    <section id="groups" class="reveal">
    <h2>Our Roblox Groups</h2>
    <p class="section-subtitle">Join our Roblox communities:</p>
    <div class="groups-grid">
      <div class="group-card">
        <p>Main Group</p>
        <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" target="_blank">
          <img src="StudioIcons/LazyStudios.png" alt="Main Group" />
        </a>
        <p class="group-members" data-group-id="33472368">Members: —</p>
      </div>

      <div class="group-card">
        <p>Active Group</p>
        <a href="https://www.roblox.com/communities/35868694/ActiveGameStudios#!/about" target="_blank">
          <img src="StudioIcons/ActiveGames.png" alt="Active Group" />
        </a>
        <p class="group-members" data-group-id="35868694">Members: —</p>
      </div>

      <div class="group-card">
        <p>Tycoon Group</p>
        <a href="https://www.roblox.com/communities/33860522/LazyGames-Tycoons#!/about" target="_blank">
          <img src="StudioIcons/LazyTycoons.png" alt="Tycoon Group" />
        </a>
        <p class="group-members" data-group-id="33860522">Members: —</p>
      </div>

      <div class="group-card">
        <p>Obby Group</p>
        <a href="https://www.roblox.com/communities/33635810/LazyGamesObbys#!/about" target="_blank">
          <img src="StudioIcons/LazyObbies.png" alt="Obby Group" />
        </a>
        <p class="group-members" data-group-id="33635810">Members: —</p>
        </div>
    </div>
  </section>

    <section id="team" class="reveal">
    <h2>Meet the Team</h2>
    <div class="team-grid">
      <div class="team-card reveal">
        <h3><a href="https://www.roblox.com/users/214865113/profile" class="team-link" target="_blank">JoJocraftHP</a></h3>
        <img src="JoJoProfile.png" alt="JoJocraftHP" loading="lazy" decoding="async" />
        <p>Owner, Game Design &amp; Management</p>
      </div>
      <div class="team-card reveal">
        <h3><a href="https://www.roblox.com/users/271040226/profile" class="team-link" target="_blank">mitex</a></h3>
        <img src="MitexProfile.png" alt="mitex" loading="lazy" decoding="async" />
        <p>Co-Owner, Scripter</p>
        </div>
      <div class="team-card reveal">
        <h3><a href="https://www.roblox.com/users/1441090007/profile" class="team-link" target="_blank">Lumpi</a></h3>
        <img src="LumpiProfile.png" alt="Lumpi" loading="lazy" decoding="async" />
        <p>Developer, Builder &amp; Modeler</p>
      </div>
    </div>
  </section>

    <section id="contact" class="reveal">
    <h2>Get in Touch</h2>
    <p class="section-subtitle">Join our community on Discord, X (Twitter), or our Roblox group:</p>
    <div class="contact-buttons">
            <a href="https://discord.gg/UnhZDUH93X" class="btn btn-discord" target="_blank">Discord</a>
      <a href="https://x.com/LazyGamesTeam" class="btn" target="_blank">X (Twitter)</a>
      <a href="https://www.roblox.com/communities/33472368/LazyGameStudios#!/about" class="btn" target="_blank">Roblox Group</a>
    </div>
  </section>

    <footer class="reveal">
    <nav><a href="#hero">Home</a> | <a href="#games">Our Games</a> | <a href="#about">About Us</a> | <a href="#groups">Groups</a> | <a href="#contact">Contact</a></nav>
    <p>&copy; <span id="current-year"></span> LazyGames</p>
  </footer>

    <button id="back-to-top" aria-label="Back to top">↑</button>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet" />

  <script>
  // ===== CONFIG =====
  const WORKER_URL = 'https://livestatsupdate.jojocrafthdyt.workers.dev';
  const REFRESH_MS = 60_000;
  const ICON_SIZE = '256x256';

  // ===== HELPERS =====
  const q  = (sel, root = document) => root.querySelector(sel);
  const qa = (sel, root = document) => [...root.querySelectorAll(sel)];

  const fmtAbbrev = (n) => {
    if (typeof n !== 'number' || isNaN(n)) return '—';
    // ENHANCEMENT: Use K/M abbreviation for CCU for consistency
    if (n >= 1_000_000) return (Math.round((n / 1_000_000) * 10) / 10).toFixed(1) + 'M';
    if (n >= 1_000)     return (Math.round((n / 1_000) * 10) / 10).toFixed(1) + 'K';
    return String(n);
  };

  async function fetchJSONWithTimeout(url, ms = 6000) {
    const ctrl = new AbortController();
    const t = setTimeout(() => ctrl.abort('timeout'), ms);
    try {
      const bust = (url.includes('?') ? '&' : '?') + '_ts=' + Date.now();
      const res = await fetch(url + bust, { headers: { accept: 'application/json' }, signal: ctrl.signal });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      return await res.json();
    } finally {
      clearTimeout(t);
    }
  }

  async function getJSON(url) {
    try {
      return await fetchJSONWithTimeout(url, 6000);
    } catch (e) {
      console.warn('JSON fetch failed, retrying once:', e);
      await new Promise(r => setTimeout(r, 400));
      return await fetchJSONWithTimeout(url, 6000); // Second attempt
    }
  }

  // ===== GAME ICONS (Roblox Thumbnails API) =====
  async function fetchAndApplyIcons(ids, imgById) {
      const thumbUrl = `https://thumbnails.roblox.com/v1/games/icons?universeIds=${encodeURIComponent(ids.join(','))}&size=${ICON_SIZE}&format=Png&isCircular=false`;
      const { data = [] } = await getJSON(thumbUrl); // Uses the robust getJSON helper

      data.forEach(node => {
          const uid = String(node.targetId);
          const img = imgById.get(uid);
          if (!img) return;

          if (node.state === 'Completed' && node.imageUrl) {
              img.src = node.imageUrl;
          }
      });
  }

  async function fillGameIcons() {
      const cards = qa('#games .game-card[data-universe-id]');
      if (!cards.length) return;

      const ids = [];
      const imgById = new Map();

      cards.forEach(card => {
          const uid = card.getAttribute('data-universe-id');
          const img = card.querySelector('img');
          if (!uid || !img) return;

          // Set fallback handler
          img.dataset.fallbackSrc = img.getAttribute('src') || '';
          img.onerror = () => {
            if (img.dataset.fallbackSrc && img.src !== img.dataset.fallbackSrc) {
              img.src = img.dataset.fallbackSrc;
            }
          };

          ids.push(uid);
          imgById.set(String(uid), img);
      });

      if (!ids.length) return;

      try {
          await fetchAndApplyIcons(ids, imgById);
      } catch (err) {
          console.warn('[Icons] fetch failed; using fallbacks:', err);
      }
  }

  // ===== LIVE GAME STATS =====
  function renderGameStats(data) {
    const cards = qa('#games .game-card[data-universe-id]');
    const byId = new Map((data?.data || []).map(g => [String(g.id), g]));

    cards.forEach(card => {
      const uid = String(card.getAttribute('data-universe-id'));
      const g = byId.get(uid);
      const ccuEl    = q('.live-ccu', card);
      const visitsEl = q('.live-visits', card);

      if (!g) return;
      // ENHANCEMENT: Using fmtAbbrev for CCU as well for consistency (e.g., 1.5K instead of 1,500)
      if (ccuEl)    ccuEl.textContent    = 'Current CCU: ' + fmtAbbrev(typeof g.playing === 'number' ? g.playing : NaN);
      if (visitsEl) visitsEl.textContent = 'Visits: ' + fmtAbbrev(typeof g.visits === 'number' ? g.visits : NaN);
    });
  }

  async function fillLiveGameStats() {
    const cards = qa('#games .game-card[data-universe-id]');
    if (!cards.length) return;

    const ids = [...new Set(cards.map(c => c.getAttribute('data-universe-id')).filter(Boolean))];
    if (!ids.length) return;

    const url = WORKER_URL + '/?endpoint=games&ids=' + encodeURIComponent(ids.join(','));

    // cached first
    try {
      const cached = sessionStorage.getItem('lg.games');
      if (cached) renderGameStats(JSON.parse(cached));
    } catch {}

    try {
      const json = await getJSON(url);
      renderGameStats(json);
      sessionStorage.setItem('lg.games', JSON.stringify(json));
    } catch (err) {
      console.warn('[LiveGames] fetch failed:', err);
    }
  }

  // ===== LIVE GROUP MEMBERS =====
  function renderGroup(el, data) {
    // ENHANCEMENT: Using fmtAbbrev for group members as well for consistency
    if (typeof data?.memberCount === 'number') {
      el.textContent = 'Members: ' + fmtAbbrev(data.memberCount);
    } else {
      el.textContent = 'Members: —';
    }
  }

  async function fillGroupMembers() {
    const els = qa('.group-members[data-group-id]');
    if (!els.length) return;

    await Promise.all(els.map(async el => {
      const id = el.getAttribute('data-group-id');
      if (!id) return;

      const url = WORKER_URL + '/?endpoint=group&groupId=' + encodeURIComponent(id);

      // cached first
      try {
        const cached = sessionStorage.getItem('lg.group.' + id);
        if (cached) renderGroup(el, JSON.parse(cached));
      } catch {}

      try {
        const json = await getJSON(url);
        renderGroup(el, json);
        sessionStorage.setItem('lg.group.' + id, JSON.stringify(json));
      } catch (err) {
        console.warn('[Group ' + id + '] fetch failed:', err);
      }
    }));
  }
  
  // ENHANCEMENT: Section tracker for navigation highlight
  function setupNavSectionTracking() {
      const navLinks = qa('nav ul li a');
      const sections = qa('section');

      const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
              const id = entry.target.id;
              const correspondingLink = q(`nav a[href="#${id}"]`);

              if (correspondingLink && entry.isIntersecting && entry.intersectionRatio >= 0.5) {
                  navLinks.forEach(link => link.classList.remove('current-section'));
                  correspondingLink.classList.add('current-section');
              }
          });
      }, { 
          threshold: 0.5, 
          // Adjust this margin to fine-tune when the link becomes active
          rootMargin: '-10% 0px -40% 0px' 
      }); 

      sections.forEach(section => observer.observe(section));
  }

  // ENHANCEMENT: Consolidated Live Data Polling
  function pollLiveData() {
      // 1. Run immediately on load
      fillLiveGameStats(); 
      fillGroupMembers();

      // 2. Set up interval refresh
      let timer = setInterval(() => {
          // Only fetch/update if the tab is visible
          if (document.visibilityState === 'visible') {
              fillLiveGameStats();
              fillGroupMembers();
          }
      }, REFRESH_MS);

      // 3. Re-run immediately on tab focus
      document.addEventListener('visibilitychange', () => {
          if (document.visibilityState === 'visible') {
              fillLiveGameStats();
          }
      });

      // 4. Clean up interval on page hide
      window.addEventListener('pagehide', () => clearInterval(timer));
  }


  // ===== PAGE BEHAVIOR =====
  document.addEventListener('DOMContentLoaded', () => {
    // Reduced motion friendly reveals
    const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (!prefersReduced) {
      try {
        const observer = new IntersectionObserver((entries, obs) => {
          entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('active'); obs.unobserve(e.target); } });
        }, { threshold: 0.1 });
        qa('.reveal').forEach(el => observer.observe(el));
      } catch {}
    } else {
      qa('.reveal').forEach(el => el.classList.add('active'));
    }

    // Header / UI niceties
    const h1 = q('.hero h1');
    if (h1) h1.addEventListener('animationend', e => { if (e.animationName === 'typewriter') h1.style.borderRight = 'none'; });

    const back = q('#back-to-top');
    if (back) {
      window.addEventListener('scroll', () => back.classList.toggle('show', window.scrollY > 300));
      back.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    const yearEl = q('#current-year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    const hamburger = q('.hamburger');
    const nav = q('nav');
    if (hamburger && nav) {
      hamburger.addEventListener('click', () => nav.classList.toggle('active'));
      qa('nav ul li a').forEach(link => link.addEventListener('click', () => nav.classList.remove('active')));
    }

    // ENHANCEMENT: Run all data fetches once (icons) or with polling (stats/groups)
    fillGameIcons();
    pollLiveData(); 
    setupNavSectionTracking();
  });
</script>

</body>
</html>
